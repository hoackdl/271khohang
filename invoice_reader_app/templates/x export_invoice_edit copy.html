{% extends "base.html" %}
{% load humanize %}

{% block content %}
<div class="container mt-3">

<h4 class="mb-3">‚úèÔ∏è <b>CH·ªàNH S·ª¨A FILE XU·∫§T H√ìA ƒê∆†N (TMP)</b></h4>

<form method="post">
{% csrf_token %}

<div class="row mb-3">
    <div class="col-md-6">
        <p><b>S·ªë Hƒê:</b> {{ invoice.so_hoa_don }}</p>
        <p><b>Ng√†y:</b> {{ invoice.ngay_hd|date:"d/m/Y" }}</p>
        <p><b>Kh√°ch h√†ng:</b> {{ invoice.ten_nguoi_mua }}</p>
    </div>
    <div class="col-md-6">
        <p><b>MST:</b> {{ invoice.ma_so_thue_mua }}</p>
        <p><b>ƒê·ªãa ch·ªâ:</b> {{ invoice.dia_chi_mua }}</p>
        <p><b>Email:</b> {{ invoice.email }}</p>
    </div>
</div>

<input type="hidden" name="items_count" value="{{ items|length }}">

<table class="table table-bordered table-sm align-middle">
    <thead class="table-light text-center">
        <tr>
            <th style="width:8%">SKU</th>
            <th>T√™n h√†ng</th>
            <th style="width:6%">ƒêVT</th>
            <th style="width:6%">SL</th>
            <th style="width:10%">ƒê∆°n gi√°</th>
            <th style="width:8%">Thu·∫ø su·∫•t</th>
        </tr>
    </thead>
    <tbody>
        {% for i in items %}
        <tr>
            <td>
                <input type="text"
                       name="sku_{{ forloop.counter0 }}"
                       value="{{ i.sku }}"
                       class="form-control form-control-sm">
            </td>

            <td>
                <input type="text"
                       name="ten_hang_{{ forloop.counter0 }}"
                       value="{{ i.ten_hang }}"
                       class="form-control form-control-sm">
            </td>

            <td>
                <input type="text"
                       name="dvt_{{ forloop.counter0 }}"
                       value="{{ i.dvt }}"
                       class="form-control form-control-sm text-center">
            </td>

            <td>
                <input type="number"
                       step="0.01"
                       name="so_luong_{{ forloop.counter0 }}"
                       value="{{ i.so_luong }}"
                       class="form-control form-control-sm text-end">
            </td>

            <td>
                <input type="number"
                       step="0.01"
                       name="don_gia_{{ forloop.counter0 }}"
                       value="{{ i.don_gia }}"
                       class="form-control form-control-sm text-end">
            </td>

            <td>
                <input type="number"
                       step="0.01"
                       name="thue_suat_{{ forloop.counter0 }}"
                       value="{{ i.thue_suat }}"
                       class="form-control form-control-sm text-end">
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="6" class="text-center text-muted">
                Kh√¥ng c√≥ d√≤ng h√†ng
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div class="text-end mt-4 d-flex justify-content-end gap-2">
    <a href="{% url 'export_invoice_waiting_list' %}"
       class="btn btn-outline-secondary px-4">
        ‚¨Ö Quay l·∫°i
    </a>

    <button type="submit"
            class="btn btn-primary px-4">
        üíæ L∆∞u ch·ªânh s·ª≠a
    </button>

    <a href="{% url 'export_export_invoice_excel' invoice.id %}"
       class="btn btn-success px-4">
        üì• T·∫£i Excel
    </a>
</div>

</form>
</div>
{% endblock %}
