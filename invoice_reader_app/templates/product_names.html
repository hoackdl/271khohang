{% extends 'base.html' %}
{% load static %}
{% load humanize %}


{% block extra_head %}
<style>
    table th, table td { vertical-align: middle; }
</style>
{% endblock %}

{% block content %}
<h2>ğŸ·ï¸ Danh má»¥c tÃªn gá»i hÃ ng hÃ³a nháº­p</h2>

<!-- ğŸ” TÃ¬m kiáº¿m -->
<form method="get" class="mb-3 row g-2 align-items-center">
    <div class="col-auto">
        <input type="text" name="search_name" placeholder="TÃ¬m kiáº¿m tÃªn hÃ ng..." value="{{ search_name }}" class="form-control form-control-sm">
    </div>
    <div class="col-auto">
        <button class="btn btn-outline-primary btn-sm">ğŸ” TÃ¬m</button>
        <a href="{% url 'product_names_export_excel' %}?search_name={{ search_name }}" class="btn btn-success btn-sm">ğŸ“¥ Xuáº¥t Excel</a>
    </div>
</form>

<!-- ğŸ“¤ Import Excel -->
<form method="post" action="{% url 'product_names_import_excel' %}" enctype="multipart/form-data" class="mb-3 row g-2 align-items-center">
  {% csrf_token %}
  <div class="col-auto">
    <input type="file" name="excel_file" accept=".xlsx,.xls" class="form-control form-control-sm" required>
  </div>
  <div class="col-auto">
    <button type="submit" class="btn btn-primary btn-sm">ğŸ“¤ Nháº­p Excel</button>
  </div>
</form>

<!-- ğŸ“‹ Báº£ng dá»¯ liá»‡u -->
<table class="table table-bordered table-hover text-center">
    <thead class="table-light">
        <tr>
            <th width="5%">TT</th>
            <th class="text-start">TÃªn hÃ ng hÃ³a</th>
            <th class="text-start">TÃªn gá»i chung</th>
            <th width="10%">HÃ nh Ä‘á»™ng</th>
        </tr>
    </thead>
    <tbody>
        {% for row in product_names %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td class="text-start">{{ row.ten_hang }}</td>
            <td class="text-start">{{ row.ten_goi_chung }}</td>
            <td>
                <a href="{% url 'product_names_edit' row.id %}" class="btn btn-sm btn-warning">âœï¸ Sá»­a</a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="4" class="text-center">ChÆ°a cÃ³ dá»¯ liá»‡u.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% if product_names.paginator %}
<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">

    {# â† Trang trÆ°á»›c #}
    {% if product_names.has_previous %}
      <li class="page-item">
        <a class="page-link" href="?page=1&{{ query_params }}">Â« Äáº§u</a>
      </li>
      <li class="page-item">
        <a class="page-link" href="?page={{ product_names.previous_page_number }}&{{ query_params }}">â€¹ TrÆ°á»›c</a>
      </li>
    {% else %}
      <li class="page-item disabled"><span class="page-link">Â« Äáº§u</span></li>
      <li class="page-item disabled"><span class="page-link">â€¹ TrÆ°á»›c</span></li>
    {% endif %}

    {# â† CÃ¡c trang #}
    {% for num in product_names.paginator.page_range %}
      {% if num == product_names.number %}
        <li class="page-item active"><span class="page-link">{{ num }}</span></li>
      {% elif num >= product_names.number|add:"-2" and num <= product_names.number|add:"2" %}
        <li class="page-item">
          <a class="page-link" href="?page={{ num }}&{{ query_params }}">{{ num }}</a>
        </li>
      {% endif %}
    {% endfor %}

    {# â†’ Trang tiáº¿p theo #}
    {% if product_names.has_next %}
      <li class="page-item">
        <a class="page-link" href="?page={{ product_names.next_page_number }}&{{ query_params }}">Sau â€º</a>
      </li>
      <li class="page-item">
        <a class="page-link" href="?page={{ product_names.paginator.num_pages }}&{{ query_params }}">Cuá»‘i Â»</a>
      </li>
    {% else %}
      <li class="page-item disabled"><span class="page-link">Sau â€º</span></li>
      <li class="page-item disabled"><span class="page-link">Cuá»‘i Â»</span></li>
    {% endif %}

  </ul>
</nav>
{% endif %}


{% endblock %}

